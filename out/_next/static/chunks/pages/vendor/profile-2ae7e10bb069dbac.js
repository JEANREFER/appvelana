(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{6160:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vendor/profile",function(){return n(8951)}])},8951:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return i}});var t=n(5893),a=n(7294),l=n(1163);function i(){let e=(0,l.useRouter)(),[r,n]=(0,a.useState)(null),[i,s]=(0,a.useState)({name:"",city:"",description:"",price:0,imageUrl:""});(0,a.useEffect)(()=>{let r=localStorage.getItem("user");if(!r){e.push("/login");return}let t=JSON.parse(r);if("prestataire"!==t.role){e.push("/");return}fetch("/api/vendor/profile?userId=".concat(t.id)).then(e=>e.json()).then(e=>{n(e),s({name:e.name,city:e.city,description:e.description,price:e.price,imageUrl:e.imageUrl||""})})},[]);let o=e=>{s({...i,[e.target.name]:e.target.value})},u=async e=>{e.preventDefault();let n=await fetch("/api/vendor/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...i,userId:r.userId})});n.ok?alert("Fiche mise \xe0 jour"):alert("Erreur lors de la mise \xe0 jour")};return r?(0,t.jsxs)("div",{className:"p-6 max-w-xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Ma fiche prestataire"}),(0,t.jsx)("button",{onClick:()=>{localStorage.removeItem("user"),e.push("/login")},className:"text-red-600 underline",children:"D\xe9connexion"})]}),(0,t.jsxs)("form",{onSubmit:u,className:"bg-white p-6 rounded shadow",children:[(0,t.jsx)("input",{name:"name",placeholder:"Nom",value:i.name,onChange:o,className:"w-full border p-2 mb-3 rounded"}),(0,t.jsx)("input",{name:"city",placeholder:"Ville",value:i.city,onChange:o,className:"w-full border p-2 mb-3 rounded"}),(0,t.jsx)("textarea",{name:"description",placeholder:"Description",value:i.description,onChange:o,className:"w-full border p-2 mb-3 rounded"}),(0,t.jsx)("input",{name:"price",type:"number",placeholder:"Tarif",value:i.price,onChange:o,className:"w-full border p-2 mb-3 rounded"}),(0,t.jsx)("input",{name:"imageUrl",placeholder:"Image URL",value:i.imageUrl,onChange:o,className:"w-full border p-2 mb-3 rounded"}),(0,t.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Enregistrer"})]})]}):(0,t.jsx)("p",{className:"p-6",children:"Chargement..."})}},1163:function(e,r,n){e.exports=n(6885)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=6160)}),_N_E=e.O()}]);