(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[259],{1889:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vendorsold",function(){return s(2200)}])},2200:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var a=s(5893),n=s(7294);function r(){let[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(null),[l,i]=(0,n.useState)(!1),[d,o]=(0,n.useState)({name:"",email:"",message:""});(0,n.useEffect)(()=>{fetch("/api/vendors").then(e=>e.json()).then(e=>t(e))},[]);let c=async e=>{let t=localStorage.getItem("user");if(!t)return alert("Connexion requise");let s=JSON.parse(t),a=await fetch("/api/my-vendors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vendorId:e,userId:s.id})});a.ok?alert("Ajout\xe9 \xe0 vos prestataires"):alert("Erreur lors de l'ajout")},m=e=>{r(e),o({name:"",email:"",message:""}),i(!0)},u=e=>o({...d,[e.target.name]:e.target.value}),x=async e=>{e.preventDefault();let t=await fetch("/api/vendors/request-quote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...d,vendorId:s.id})});t.ok?(alert("Demande envoy\xe9e"),i(!1)):alert("Erreur d'envoi")};return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Prestataires recommand\xe9s"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-white border rounded p-4 shadow",children:[e.imageUrl&&(0,a.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-48 object-cover rounded mb-2"}),(0,a.jsx)("h2",{className:"text-lg font-bold",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.city}),(0,a.jsx)("p",{className:"text-sm mb-2",children:e.description}),(0,a.jsxs)("p",{className:"text-sm font-semibold",children:["Tarif : ",e.price," â‚¬"]}),(0,a.jsxs)("div",{className:"flex justify-between mt-3",children:[(0,a.jsx)("button",{onClick:()=>c(e.id),className:"bg-green-600 text-white px-3 py-1 rounded",children:"Ajouter \xe0 mes prestataires"}),(0,a.jsx)("button",{onClick:()=>m(e),className:"bg-blue-600 text-white px-3 py-1 rounded",children:"Demander un devis"})]})]},e.id))}),l&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,a.jsxs)("form",{onSubmit:x,className:"bg-white rounded p-6 shadow w-full max-w-md",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Demander un devis \xe0 ",s.name]}),(0,a.jsx)("input",{type:"text",name:"name",placeholder:"Votre nom",required:!0,className:"w-full border p-2 mb-3 rounded",value:d.name,onChange:u}),(0,a.jsx)("input",{type:"email",name:"email",placeholder:"Votre email",required:!0,className:"w-full border p-2 mb-3 rounded",value:d.email,onChange:u}),(0,a.jsx)("textarea",{name:"message",placeholder:"Message",className:"w-full border p-2 mb-3 rounded",value:d.message,onChange:u,required:!0}),(0,a.jsxs)("div",{className:"flex justify-end",children:[(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Envoyer"}),(0,a.jsx)("button",{type:"button",onClick:()=>i(!1),className:"ml-2 bg-gray-500 text-white px-4 py-2 rounded",children:"Annuler"})]})]})})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=1889)}),_N_E=e.O()}]);