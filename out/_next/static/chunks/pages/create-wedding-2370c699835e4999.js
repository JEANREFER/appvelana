(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[324],{8260:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create-wedding",function(){return a(6997)}])},6997:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var n=a(5893),r=a(7294),u=a(1163);function d(){let[e,t]=(0,r.useState)({couple_name:"",wedding_date:"",budget:15e3}),[a,d]=(0,r.useState)(""),s=(0,u.useRouter)(),o=a=>t({...e,[a.target.name]:a.target.value}),i=async t=>{t.preventDefault();let a=JSON.parse(localStorage.getItem("user"));if(!a||!a.id||!a.role)return alert("Utilisateur non identifi\xe9 ou incomplet");let n=await fetch("/api/weddings/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,created_by:a.id,role:a.role})});if(n.ok)"organisateur"===a.role?s.push("/organizer/dashboard"):s.push("/weddings");else{let e=await n.json();d(e.message||"Erreur lors de la cr\xe9ation du mariage")}};return(0,n.jsxs)("div",{className:"p-6 max-w-md mx-auto",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Cr\xe9er un mariage"}),a&&(0,n.jsx)("p",{className:"text-red-500 mb-3",children:a}),(0,n.jsxs)("form",{onSubmit:i,className:"space-y-4",children:[(0,n.jsx)("input",{type:"text",name:"couple_name",placeholder:"Nom du couple",required:!0,className:"w-full border p-2 rounded",value:e.couple_name,onChange:o}),(0,n.jsx)("input",{type:"date",name:"wedding_date",required:!0,className:"w-full border p-2 rounded",value:e.wedding_date,onChange:o}),(0,n.jsx)("input",{type:"number",name:"budget",className:"w-full border p-2 rounded",value:e.budget,onChange:o}),(0,n.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Cr\xe9er"})]})]})}},1163:function(e,t,a){e.exports=a(6885)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8260)}),_N_E=e.O()}]);