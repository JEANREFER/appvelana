(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{7061:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return a(5962)}])},5962:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return i}});var n=a(5893),t=a(7294);function i(){let[e,s]=(0,t.useState)([]),a=async()=>{let e=await fetch("/api/admin/users"),a=await e.json();s(a)};(0,t.useEffect)(()=>{a()},[]);let i=async(e,s)=>{await fetch("/api/admin/users/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:s})}),a()},l=async(e,s)=>{await fetch("/api/admin/users/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isBlocked:!s})}),a()};return(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Utilisateurs"}),(0,n.jsxs)("table",{className:"w-full bg-white rounded shadow",children:[(0,n.jsx)("thead",{className:"bg-gray-100",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"p-2",children:"Nom"}),(0,n.jsx)("th",{className:"p-2",children:"Email"}),(0,n.jsx)("th",{className:"p-2",children:"R\xf4le"}),(0,n.jsx)("th",{className:"p-2",children:"Mariages"}),(0,n.jsx)("th",{className:"p-2",children:"Dernier acc\xe8s"}),(0,n.jsx)("th",{className:"p-2",children:"Bloqu\xe9"}),(0,n.jsx)("th",{className:"p-2",children:"Action"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>(0,n.jsxs)("tr",{className:"border-b",children:[(0,n.jsx)("td",{className:"p-2",children:e.name}),(0,n.jsx)("td",{className:"p-2",children:e.email}),(0,n.jsx)("td",{className:"p-2",children:(0,n.jsxs)("select",{value:e.role,onChange:s=>i(e.id,s.target.value),className:"border p-1 rounded",children:[(0,n.jsx)("option",{value:"organisateur",children:"Organisateur"}),(0,n.jsx)("option",{value:"marie",children:"Mari\xe9(e)"}),(0,n.jsx)("option",{value:"admin",children:"Admin"})]})}),(0,n.jsx)("td",{className:"p-2 text-center",children:e.weddings}),(0,n.jsx)("td",{className:"p-2",children:e.lastLogin?new Date(e.lastLogin).toLocaleString():"-"}),(0,n.jsx)("td",{className:"p-2 text-center",children:e.isBlocked?"✅":"❌"}),(0,n.jsx)("td",{className:"p-2",children:(0,n.jsx)("button",{onClick:()=>l(e.id,e.isBlocked),className:"bg-red-600 text-white px-3 py-1 rounded",children:e.isBlocked?"D\xe9bloquer":"Bloquer"})})]},e.id))})]})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7061)}),_N_E=e.O()}]);