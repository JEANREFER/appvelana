(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[379],{1373:function(e,r,a){"use strict";a.d(r,{Z:function(){return o}});var t=a(7294);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,a)=>a?a.toUpperCase():r.toLowerCase()),l=e=>{let r=n(e);return r.charAt(0).toUpperCase()+r.slice(1)},i=(...e)=>e.filter((e,r,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:n="",children:l,iconNode:c,...o},h)=>(0,t.createElement)("svg",{ref:h,...d,width:r,height:r,stroke:e,strokeWidth:s?24*Number(a)/Number(r):a,className:i("lucide",n),...o},[...c.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(l)?l:[l]])),o=(e,r)=>{let a=(0,t.forwardRef)(({className:a,...n},d)=>(0,t.createElement)(c,{ref:d,iconNode:r,className:i(`lucide-${s(l(e))}`,`lucide-${e}`,a),...n}));return a.displayName=l(e),a}},6789:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});var t=a(1373);let s=(0,t.Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},4622:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});var t=a(1373);let s=(0,t.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},1408:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});var t=a(1373);let s=(0,t.Z)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},899:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/organizer/dashboard",function(){return a(1646)}])},1646:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return h}});var t=a(5893),s=a(7294),n=a(1163),l=a(1664),i=a.n(l),d=a(4622),c=a(6789),o=a(1408);function h(){let e=(0,n.useRouter)(),[r,a]=(0,s.useState)(null),[l,h]=(0,s.useState)([]),[u,x]=(0,s.useState)([]),[m,g]=(0,s.useState)(""),[p,b]=(0,s.useState)("name"),[f,j]=(0,s.useState)(!0),[y,N]=(0,s.useState)("");return((0,s.useEffect)(()=>{let r=JSON.parse(localStorage.getItem("user"));if(!r){e.push("/");return}a(r),fetch("/api/weddings/").then(e=>{if(!e.ok)throw Error("Erreur API");return e.json()}).then(e=>{let a=Array.isArray(e)?e:e.weddings||[],t=a.filter(e=>e.created_by===r.id);h(t),x(t),j(!1)}).catch(e=>{console.error("Erreur fetch:",e),N("Erreur lors du chargement des mariages."),j(!1)})},[]),f)?(0,t.jsx)("p",{className:"p-6",children:"Chargement..."}):y?(0,t.jsx)("p",{className:"p-6 text-red-500",children:y}):(0,t.jsxs)("div",{className:"min-h-screen flex flex-col bg-white",children:[(0,t.jsxs)("header",{className:"bg-white shadow px-6 py-4 flex justify-between items-center border-b border-gray-200",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:"Velana"}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,t.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:"bg-white border border-gray-300 px-3 py-2 rounded shadow-sm text-sm",children:[(0,t.jsx)("option",{value:"name",children:"Nom des mari\xe9s"}),(0,t.jsx)("option",{value:"date",children:"Date de mariage"}),(0,t.jsx)("option",{value:"budget",children:"Budget"})]}),(0,t.jsx)("input",{type:"text",placeholder:"Rechercher par ".concat(p),value:m,onChange:e=>{let r=e.target.value.toLowerCase();g(r);let a=l.filter(e=>"name"===p?e.couple_name.toLowerCase().includes(r):"date"===p?new Date(e.wedding_date).toLocaleDateString().includes(r):"budget"!==p||e.budget.toString().includes(r));x(a)},className:"w-64 border px-3 py-2 rounded shadow-sm"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(i(),{href:"/organizer/myplanning",children:(0,t.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded text-gray-500",children:(0,t.jsx)(d.Z,{className:"h-5 w-5"})})}),(0,t.jsx)(i(),{href:"/organizer/myurgent-tasks",children:(0,t.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded text-gray-500",children:(0,t.jsx)(c.Z,{className:"h-5 w-5"})})}),(0,t.jsx)(i(),{href:"/organizer/myprofile",children:(0,t.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded text-gray-500",children:(0,t.jsx)(o.Z,{className:"h-5 w-5"})})}),(0,t.jsx)(i(),{href:"/organizer/myprofile",children:(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center cursor-pointer",children:(0,t.jsx)("span",{className:"text-sm font-medium",children:"US"})})})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-1",children:[(0,t.jsxs)("aside",{className:"w-64 bg-white border-r border-gray-200 p-6 hidden md:block",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Organisateur"}),r&&(0,t.jsxs)("div",{className:"text-sm space-y-2 mb-6",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Nom :"})," ",r.name||"Inconnu"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Email :"})," ",r.email||"Non renseign\xe9"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"T\xe9l\xe9phone :"})," ",r.phone||"Non renseign\xe9"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Adresse :"})," ",r.address||"Non renseign\xe9e"]})]}),(0,t.jsxs)("nav",{className:"text-sm space-y-3 pt-4 border-t border-gray-200",children:[(0,t.jsx)("a",{href:"/organizer/stats",className:"text-black hover:underline block",children:"\uD83D\uDCCA Statistiques & Suivi"}),(0,t.jsx)("a",{href:"/organizer/urgent-planning",className:"text-black hover:underline block",children:"\uD83D\uDDD3️ Planning"}),(0,t.jsx)("a",{href:"/organizer/urgent-tasks",className:"text-black hover:underline block",children:"⚠️ T\xe2ches urgentes"})]})]}),(0,t.jsxs)("main",{className:"flex-1 p-6 overflow-y-auto",children:[(0,t.jsxs)("div",{className:"mb-6 pb-4 border-b border-gray-200 flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Tableau de bord"}),(0,t.jsx)("button",{onClick:()=>{e.push("/weddings/new")},className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-700 transition",children:"+ Ajouter un mariage"})]}),0===u.length?(0,t.jsx)("p",{children:"Aucun mariage trouv\xe9."}):(0,t.jsx)("div",{className:"max-h-[1600px] overflow-y-auto pr-2",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.map(r=>(0,t.jsxs)("div",{className:"bg-white border border-gray-200 shadow rounded-lg p-6 hover:shadow-md transition duration-300",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:r.couple_name}),(0,t.jsxs)("p",{className:"text-gray-700 mb-1",children:["Date : ",new Date(r.wedding_date).toLocaleDateString()]}),(0,t.jsxs)("p",{className:"text-gray-700 mb-4",children:["Budget : ",r.budget," €"]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("button",{onClick:()=>e.push("/weddings/".concat(r.id,"/mydashboard")),className:"text-gray-600 hover:text-gray-800 underline",children:"Voir la page du mariage"}),(0,t.jsxs)("span",{className:"text-sm text-gray-400",children:["ID : ",r.id]})]})]},r.id))})})]})]}),(0,t.jsxs)("footer",{className:"bg-white border-t border-gray-200 text-center py-4 text-sm text-gray-600",children:["Besoin d'aide ? ",(0,t.jsx)("a",{href:"/support",className:"underline hover:text-black",children:"Contactez le support Velana"})]})]})}}},function(e){e.O(0,[424,774,888,179],function(){return e(e.s=899)}),_N_E=e.O()}]);